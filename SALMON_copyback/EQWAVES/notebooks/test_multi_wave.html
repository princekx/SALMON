<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SALMON - SEAsia Large Scale Monitoring Dashboard</title>

    <!-- Add Bootstrap CSS for styling -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <style>
        body {
            padding: 5px;
        }

        iframe {
            width: 100%;
            height: 1000px;
            border: 0px solid #ddd;
            margin-top: 20px;
            margin-left: 0px;
        }

        .container {
            margin-top: 20px;
        }

        h1 {
            width: 100%;
            color: #ffffff;
            background-color: #007bff;
            padding: 20px;
            font-weight: bold;
            border-radius: 5px;
        }

        h2, h3 {
            color: #007bff;
            border-bottom: 2px solid #007bff;
            padding-bottom: 10px;
            padding-top: 10px;
        }

        h3 {
            font-size: 16px;
        }

        select.form-control {
            width: 100%;
        }

        .iframe-container {
            display: flex;
            width: 50%;
            flex-direction: row;
        }

        .wave-checkboxes {
            margin-top: 10px;
        }

    </style>
</head>

<body>

<div class="container">
    <div class="row">
        <div class="col-md-12">
            <h1>SALMON - SEAsia Large Scale Monitoring</h1>
        </div>
    </div>
</div>

<div class="container">
    <div class="row">
        <div class="col-md-12">
            <!-- Bootstrap Tabs -->
            <ul class="nav nav-tabs" id="dashboardTabs" role="tablist">
                <li class="nav-item">
                    <a class="nav-link active" id="mjoTab" data-toggle="tab" href="#mjo" role="tab"
                       aria-controls="mjo" aria-selected="true">MJO</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="coldsurgeTab" data-toggle="tab" href="#coldsurge" role="tab"
                       aria-controls="coldsurge" aria-selected="false">Cold Surge</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="eqwTab" data-toggle="tab" href="#eqwaves" role="tab"
                       aria-controls="eqwaves" aria-selected="false">Equatorial Waves</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="bsisoTab" data-toggle="tab" href="#bsiso" role="tab"
                       aria-controls="bsiso" aria-selected="false">BSISO</a>
                </li>
            </ul>

            <div class="tab-content" id="dashboardTabsContent">
                <!-- MJO Tab -->
                <div class="tab-pane fade show active" id="mjo" role="tabpanel" aria-labelledby="mjoTab">
                    <div class="row">
                        <div class="col-md-6">
                            <h2>MOGREPS</h2>
                            <label for="mogrepsDropdown">Select MOGREPS Date:</label>
                            <div class="input-group mb-3">
                                <div class="input-group-append">
                                    <button class="btn btn-outline-secondary" type="button" id="nextMogrepsBtn">Prev</button>
                                </div>
                                <select id="mogrepsDropdown" class="form-control"></select>
                                <div class="input-group-prepend">
                                    <button class="btn btn-outline-secondary" type="button" id="prevMogrepsBtn">Next</button>
                                </div>
                            </div>
                            <iframe id="mogrepsIframe" frameborder="0"></iframe>
                        </div>
                        <div class="col-md-6">
                            <h2>GLOSEA</h2>
                            <label for="gloseaDropdown">Select GLOSEA Date:</label>
                            <div class="input-group mb-3">
                                <div class="input-group-append">
                                    <button class="btn btn-outline-secondary" type="button" id="nextGloseaBtn">Prev</button>
                                </div>
                                <select id="gloseaDropdown" class="form-control"></select>
                                <div class="input-group-prepend">
                                    <button class="btn btn-outline-secondary" type="button" id="prevGloseaBtn">Next</button>
                                </div>
                            </div>
                            <iframe id="gloseaIframe" frameborder="0"></iframe>
                        </div>
                    </div>
                </div>

                <!-- BSISO Tab -->
                <div class="tab-pane fade" id="bsiso" role="tabpanel" aria-labelledby="bsisoTab">
                    <div class="row">
                        <div class="col-md-6">
                            <h2>MOGREPS</h2>
                            <label for="bsisoMogrepsDropdown">Select MOGREPS Date:</label>
                            <div class="input-group mb-3">
                                <div class="input-group-append">
                                    <button class="btn btn-outline-secondary" type="button" id="nextBsisoMogrepsBtn">Prev</button>
                                </div>
                                <select id="bsisoMogrepsDropdown" class="form-control"></select>
                                <div class="input-group-prepend">
                                    <button class="btn btn-outline-secondary" type="button" id="prevBsisoMogrepsBtn">Next</button>
                                </div>
                            </div>
                            <iframe id="bsisoMogrepsIframe" frameborder="0"></iframe>
                        </div>
                        <div class="col-md-6">
                            <h2>GLOSEA</h2>
                            <label for="bsisoGloseaDropdown">Select GLOSEA Date:</label>
                            <div class="input-group mb-3">
                                <div class="input-group-append">
                                    <button class="btn btn-outline-secondary" type="button" id="nextBsisoGloseaBtn">Prev</button>
                                </div>
                                <select id="bsisoGloseaDropdown" class="form-control"></select>
                                <div class="input-group-prepend">
                                    <button class="btn btn-outline-secondary" type="button" id="prevBsisoGloseaBtn">Next</button>
                                </div>
                            </div>
                            <iframe id="bsisoGloseaIframe" frameborder="0"></iframe>
                        </div>
                    </div>
                </div>

                <!-- Cold Surge Tab -->
                <div class="tab-pane fade" id="coldsurge" role="tabpanel" aria-labelledby="coldsurgeTab">
                    <div class="row">
                        <div class="col-md-4">
                            <label for="dateDropdown">Select Date:</label>
                            <select id="dateDropdown" class="form-control"></select>
                        </div>
                        <div class="col-md-4">
                            <label for="leadTimeDropdown">Select Lead Time:</label>
                            <div class="input-group">
                                <select id="leadTimeDropdown" class="form-control">
                                    <option value="24">1 day (24h)</option>
                                    <option value="48">2 days (48h)</option>
                                    <option value="72">3 days (72h)</option>
                                    <option value="96">4 days (96h)</option>
                                </select>
                                <div class="input-group-append">
                                    <button class="btn btn-primary" type="button" id="decrementLeadTimeBtn">-</button>
                                    <button class="btn btn-primary" type="button" id="incrementLeadTimeBtn">+</button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <label for="thresholdDropdown">Select Precip. Threshold:</label>
                            <select id="thresholdDropdown" class="form-control">
                                <option value="10">10</option>
                                <option value="20">20</option>
                                <option value="30">30</option>
                            </select>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <iframe id="mogrepsEnsMeanIframe" frameborder="0" width="100%"></iframe>
                        </div>
                        <div class="col-md-6">
                            <iframe id="mogrepsProbMapsIframe" frameborder="0" width="100%"></iframe>
                        </div>
                    </div>
                </div>

                <!-- Equatorial Waves Tab -->
                <div class="tab-pane fade" id="eqwaves" role="tabpanel" aria-labelledby="eqwTab">
                    <div class="row">
                        <div class="col-md-3">
                            <label for="eqwDateDropdown">Select Date:</label>
                            <select id="eqwDateDropdown" class="form-control"></select>
                        </div>
                        <div class="col-md-3">
                            <label for="eqwLeadTimeDropdown">Select Lead Time:</label>
                            <div class="input-group">
                                <select id="eqwLeadTimeDropdown" class="form-control"></select>
                                <div class="input-group-append">
                                    <button class="btn btn-primary" type="button" id="eqwDecrementLeadTimeBtn">-</button>
                                    <button class="btn btn-primary" type="button" id="eqwIncrementLeadTimeBtn">+</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Checkboxes for Wave Selection -->
                    <div class="row wave-checkboxes">
                        <div class="col-md-12">
                            <h3>Select Waves:</h3>
                            <label><input type="checkbox" name="waves" value="Kelvin" checked> Kelvin</label>
                            <label><input type="checkbox" name="waves" value="WMRG"> WMRG</label>
                            <label><input type="checkbox" name="waves" value="R1"> Rossby (n=1)</label>
                            <label><input type="checkbox" name="waves" value="R2"> Rossby (n=2)</label>
                        </div>
                    </div>

                    <h3 style="margin-top: 20px;">MOGREPS</h3>
                    <div class="row">
                        <div class="col-md-12">
                            <iframe id="eqwMogrepsEnsMeanIframe" style="margin-top: 10px; width: 100%; min-height: 600px; border: none;"></iframe>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Add Bootstrap JS and jQuery for dropdown functionality -->
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

<script>
    const baseUrl = "Monitoring_dashboard/eqwaves/mogreps/plot_ens_new/";
    const eqwDateDropdown = document.getElementById('eqwDateDropdown');
    const eqwLeadTimeDropdown = document.getElementById('eqwLeadTimeDropdown');
    const eqwMogrepsEnsMeanIframe = document.getElementById('eqwMogrepsEnsMeanIframe');
    const waveCheckboxes = document.querySelectorAll('input[name="waves"]');

    function updateEqWavesPlot() {
        const selectedDate = eqwDateDropdown.value;
        const leadTime = eqwLeadTimeDropdown.value;
        let selectedWaves = [];

        // Get selected wave values from checkboxes
        waveCheckboxes.forEach(checkbox => {
            if (checkbox.checked) {
                selectedWaves.push(checkbox.value);
            }
        });

        if (selectedWaves.length > 0) {
            // Load the background plot for the selected waves
            const time = "00";  // Assuming time is fixed for this example (can be changed)
            const src = `${baseUrl}Precip_NoLevel_EnsProb_${selectedDate}_${time}Z_${leadTime}.html`;
            eqwMogrepsEnsMeanIframe.src = src;
        }
    }

    // Event listener for dropdown and checkbox changes
    eqwDateDropdown.addEventListener('change', updateEqWavesPlot);
    eqwLeadTimeDropdown.addEventListener('change', updateEqWavesPlot);
    waveCheckboxes.forEach(checkbox => {
        checkbox.addEventListener('change', updateEqWavesPlot);
    });

    // Function to populate dropdowns (date and lead time)
    function populateDateDropdown() {
        // Example of populating with static values for demonstration
        const dates = ["20231001", "20231002", "20231003"];  // Example dates
        dates.forEach(date => {
            const option = new Option(date, date);
            eqwDateDropdown.appendChild(option);
        });
    }

    function populateLeadTimeDropdown() {
        // Example of populating with static lead times for demonstration
        const leadTimes = ["24", "48", "72", "96", "120"];
        leadTimes.forEach(leadTime => {
            const option = new Option(`${leadTime} hours`, leadTime);
            eqwLeadTimeDropdown.appendChild(option);
        });
    }

    // Initialize dropdowns
    populateDateDropdown();
    populateLeadTimeDropdown();
    updateEqWavesPlot();

</script>

</body>

</html>
